<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Zumo - Sonar lib: servo.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Zumo - Sonar lib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('servo_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">servo.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;MKL46Z4.h&quot;</code><br />
</div>
<p><a href="servo_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9dd4fd71f9e5c4a54891b5d230efed9a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a9dd4fd71f9e5c4a54891b5d230efed9a">SERVO_MOVEMENT_MIN</a>&#160;&#160;&#160;2200*<a class="el" href="servo_8c.html#a43bd726e128da98b4838a68c0703ea97">SERVO_TICKS_PER_US</a></td></tr>
<tr class="memdesc:a9dd4fd71f9e5c4a54891b5d230efed9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define minimum PWM lenght which servo can tolerate This macro defines the minimal PWM which can be used, i.e. how far to the LEFT this servo can move.  <a href="#a9dd4fd71f9e5c4a54891b5d230efed9a">More...</a><br /></td></tr>
<tr class="separator:a9dd4fd71f9e5c4a54891b5d230efed9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b74523ca884eb770565fa25553cfc8b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a9b74523ca884eb770565fa25553cfc8b">SERVO_MOVEMENT_MAX</a>&#160;&#160;&#160;800*<a class="el" href="servo_8c.html#a43bd726e128da98b4838a68c0703ea97">SERVO_TICKS_PER_US</a></td></tr>
<tr class="memdesc:a9b74523ca884eb770565fa25553cfc8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define maximum PWM lenght which servo can tolerate This macro defines the maximal PWM which can be used, i.e. how far to the RIGHT this servo can move.  <a href="#a9b74523ca884eb770565fa25553cfc8b">More...</a><br /></td></tr>
<tr class="separator:a9b74523ca884eb770565fa25553cfc8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2e5b971afbd9bc1583edc510ce81a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a3d2e5b971afbd9bc1583edc510ce81a7">SERVO_MOVEMENT_RANGE</a>&#160;&#160;&#160;82</td></tr>
<tr class="memdesc:a3d2e5b971afbd9bc1583edc510ce81a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define how many degrees this servo can turn This marco defines how far to the left and to the right can servo operate It is used to map degrees into PWM width. This value may differ from servo to servo. It is recomended to measure it yourself.  <a href="#a3d2e5b971afbd9bc1583edc510ce81a7">More...</a><br /></td></tr>
<tr class="separator:a3d2e5b971afbd9bc1583edc510ce81a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a036039969fe1374ce619c5be838d61"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a3a036039969fe1374ce619c5be838d61">SERVO_STEP_DEG</a>&#160;&#160;&#160;30      									/* Sweep step in degrees */</td></tr>
<tr class="memdesc:a3a036039969fe1374ce619c5be838d61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define sweep step in degrees This marco defines a sweep step. Every step servo will rotate by this value.  <a href="#a3a036039969fe1374ce619c5be838d61">More...</a><br /></td></tr>
<tr class="separator:a3a036039969fe1374ce619c5be838d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6b3d47b4cc3eabdd64e99a67bf96e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#afd6b3d47b4cc3eabdd64e99a67bf96e7">SERVO_ANGULAR_VELOCITY</a>&#160;&#160;&#160;200</td></tr>
<tr class="memdesc:afd6b3d47b4cc3eabdd64e99a67bf96e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define Servo angular velocity in deg/s Due to lack of feedback from servo, we have to estimate its travel time 240deg/s is our observed velocity with a sonar as a load. You can try tweeking this value for better performance in your setup.  <a href="#afd6b3d47b4cc3eabdd64e99a67bf96e7">More...</a><br /></td></tr>
<tr class="separator:afd6b3d47b4cc3eabdd64e99a67bf96e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:adb4fe5913bad3ac2c2c8a43382a19f8c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8c">ServoMode_t</a> { <a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8caf79ba459cbd48e08da1516e074328cc7">SWEEP</a>, 
<a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8ca506e8dd29460ea318b68d035f679b01b">MANUAL</a>
 }</td></tr>
<tr class="memdesc:adb4fe5913bad3ac2c2c8a43382a19f8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define Servo work modes.  <a href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8c">More...</a><br /></td></tr>
<tr class="separator:adb4fe5913bad3ac2c2c8a43382a19f8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b2b8b593017fd9289c835aebc4e643b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643b">ServoSweep_t</a> { <a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643ba6c10fdfa1daee3c41144ae3c84215d1c">SCAN_AND_GO</a>, 
<a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643ba6791b0cadbd0741a7a70eafee6ee192c">SCAN_AND_LOCK</a>
 }</td></tr>
<tr class="memdesc:a9b2b8b593017fd9289c835aebc4e643b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define Servo Sweep modes.  <a href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643b">More...</a><br /></td></tr>
<tr class="separator:a9b2b8b593017fd9289c835aebc4e643b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d433bbccac873673ce5c7f76308e36a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a2d433bbccac873673ce5c7f76308e36a">ServoState_t</a> { <a class="el" href="servo_8h.html#a2d433bbccac873673ce5c7f76308e36aa16ebdcb23eb5337fd5bc598fa8d6035d">MOVING</a>, 
<a class="el" href="servo_8h.html#a2d433bbccac873673ce5c7f76308e36aafd6a0e4343048b10646dd2976cc5ad18">IDLE</a>, 
<a class="el" href="servo_8h.html#a2d433bbccac873673ce5c7f76308e36aa6b4af979c9694e48f340397ac08dfd1c">LOCKED</a>
 }</td></tr>
<tr class="memdesc:a2d433bbccac873673ce5c7f76308e36a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define Servo states.  <a href="servo_8h.html#a2d433bbccac873673ce5c7f76308e36a">More...</a><br /></td></tr>
<tr class="separator:a2d433bbccac873673ce5c7f76308e36a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab944078572fad93e2090509e3957005b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#ab944078572fad93e2090509e3957005b">Servo_init</a> (<a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8c">ServoMode_t</a> InitialWorkMode, <a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643b">ServoSweep_t</a> InitialSweepMode)</td></tr>
<tr class="memdesc:ab944078572fad93e2090509e3957005b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Servo Initialize all necessary peripherals needed for servo control.  <a href="#ab944078572fad93e2090509e3957005b">More...</a><br /></td></tr>
<tr class="separator:ab944078572fad93e2090509e3957005b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0efffe5db4190a16376b48ab8ae0ac2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a0efffe5db4190a16376b48ab8ae0ac2c">ServoMoveByDegree</a> (int32_t degree)</td></tr>
<tr class="memdesc:a0efffe5db4190a16376b48ab8ae0ac2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move servo to a given position in degrees This function allows movment of servo in a direction specified by an angle. It will try to predict requied time needed by servo to finish rotation and set PIT_CH2 to countdown. It will also update <a class="el" href="servo_8c.html#aace1737de9594d03f5e07f8eb75a6c7a" title="Variable containing Servo current state. ">ServoState</a> appropriately.  <a href="#a0efffe5db4190a16376b48ab8ae0ac2c">More...</a><br /></td></tr>
<tr class="separator:a0efffe5db4190a16376b48ab8ae0ac2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1285fbc29db2d21ff556d90bb80a557c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a1285fbc29db2d21ff556d90bb80a557c">ServoSweepStep</a> (uint16_t distance)</td></tr>
<tr class="memdesc:a1285fbc29db2d21ff556d90bb80a557c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute a sweep step depending on <a class="el" href="servo_8c.html#a1cc6cbb5101dee2b682f5e3b4ce39814" title="Variable containing current Servo Sweep mode. ">ServoSweepMode</a>.  <a href="#a1285fbc29db2d21ff556d90bb80a557c">More...</a><br /></td></tr>
<tr class="separator:a1285fbc29db2d21ff556d90bb80a557c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1e027654d29aef3848af9f2e118688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a1c1e027654d29aef3848af9f2e118688">ServoChangeMode</a> (<a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8c">ServoMode_t</a> NewMode)</td></tr>
<tr class="memdesc:a1c1e027654d29aef3848af9f2e118688"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows safe changing of servo work mode. This function prevents some rare cases of deadlock due to timing issues that might arise when Servo is changing mode.  <a href="#a1c1e027654d29aef3848af9f2e118688">More...</a><br /></td></tr>
<tr class="separator:a1c1e027654d29aef3848af9f2e118688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1865a21f6683bb41e8a935c33caa3363"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a1865a21f6683bb41e8a935c33caa3363">ServoChangeSweepMode</a> (<a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643b">ServoSweep_t</a> NewSweep)</td></tr>
<tr class="memdesc:a1865a21f6683bb41e8a935c33caa3363"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows safe changing of servo SWEEP mode.  <a href="#a1865a21f6683bb41e8a935c33caa3363">More...</a><br /></td></tr>
<tr class="separator:a1865a21f6683bb41e8a935c33caa3363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addddfc1dc1dee155e313d00b0f660075"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#addddfc1dc1dee155e313d00b0f660075">ServoChangeLockRange</a> (uint16_t NewRange)</td></tr>
<tr class="memdesc:addddfc1dc1dee155e313d00b0f660075"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function allows safe changing of servo <a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643ba6791b0cadbd0741a7a70eafee6ee192c">SCAN_AND_LOCK</a> mode lock range.  <a href="#addddfc1dc1dee155e313d00b0f660075">More...</a><br /></td></tr>
<tr class="separator:addddfc1dc1dee155e313d00b0f660075"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a17abd21d85ada3e51b18432cf1c2b426"><td class="memItemLeft" align="right" valign="top"><a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8c">ServoMode_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a17abd21d85ada3e51b18432cf1c2b426">ServoMode</a></td></tr>
<tr class="memdesc:a17abd21d85ada3e51b18432cf1c2b426"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define Servo Work mode Manual mode is default.  <a href="#a17abd21d85ada3e51b18432cf1c2b426">More...</a><br /></td></tr>
<tr class="separator:a17abd21d85ada3e51b18432cf1c2b426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace1737de9594d03f5e07f8eb75a6c7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="servo_8h.html#a2d433bbccac873673ce5c7f76308e36a">ServoState_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#aace1737de9594d03f5e07f8eb75a6c7a">ServoState</a></td></tr>
<tr class="memdesc:aace1737de9594d03f5e07f8eb75a6c7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable containing Servo current state.  <a href="#aace1737de9594d03f5e07f8eb75a6c7a">More...</a><br /></td></tr>
<tr class="separator:aace1737de9594d03f5e07f8eb75a6c7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ca30760f53d2a937b251cfb0e76a6e0"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a6ca30760f53d2a937b251cfb0e76a6e0">ServoPosition</a></td></tr>
<tr class="memdesc:a6ca30760f53d2a937b251cfb0e76a6e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define Servo Position in degrees. This variable contains predicted position of a servo.  <a href="#a6ca30760f53d2a937b251cfb0e76a6e0">More...</a><br /></td></tr>
<tr class="separator:a6ca30760f53d2a937b251cfb0e76a6e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="afd6b3d47b4cc3eabdd64e99a67bf96e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERVO_ANGULAR_VELOCITY&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define Servo angular velocity in deg/s Due to lack of feedback from servo, we have to estimate its travel time 240deg/s is our observed velocity with a sonar as a load. You can try tweeking this value for better performance in your setup. </p>
<dl class="section warning"><dt>Warning</dt><dd>Do not set this value too high as it may damage the servo </dd></dl>

</div>
</div>
<a class="anchor" id="a9b74523ca884eb770565fa25553cfc8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERVO_MOVEMENT_MAX&#160;&#160;&#160;800*<a class="el" href="servo_8c.html#a43bd726e128da98b4838a68c0703ea97">SERVO_TICKS_PER_US</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define maximum PWM lenght which servo can tolerate This macro defines the maximal PWM which can be used, i.e. how far to the RIGHT this servo can move. </p>
<dl class="section warning"><dt>Warning</dt><dd>Setting this value above 2200 may damage the servo. If you hear noisy clicking, power off the system! </dd></dl>

</div>
</div>
<a class="anchor" id="a9dd4fd71f9e5c4a54891b5d230efed9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERVO_MOVEMENT_MIN&#160;&#160;&#160;2200*<a class="el" href="servo_8c.html#a43bd726e128da98b4838a68c0703ea97">SERVO_TICKS_PER_US</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define minimum PWM lenght which servo can tolerate This macro defines the minimal PWM which can be used, i.e. how far to the LEFT this servo can move. </p>
<dl class="section warning"><dt>Warning</dt><dd>Setting this value below 800 may damage the servo. If you hear noisy clicking, power off the system! </dd></dl>

</div>
</div>
<a class="anchor" id="a3d2e5b971afbd9bc1583edc510ce81a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERVO_MOVEMENT_RANGE&#160;&#160;&#160;82</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define how many degrees this servo can turn This marco defines how far to the left and to the right can servo operate It is used to map degrees into PWM width. This value may differ from servo to servo. It is recomended to measure it yourself. </p>

</div>
</div>
<a class="anchor" id="a3a036039969fe1374ce619c5be838d61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERVO_STEP_DEG&#160;&#160;&#160;30      									/* Sweep step in degrees */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define sweep step in degrees This marco defines a sweep step. Every step servo will rotate by this value. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="adb4fe5913bad3ac2c2c8a43382a19f8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8c">ServoMode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define Servo work modes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="adb4fe5913bad3ac2c2c8a43382a19f8caf79ba459cbd48e08da1516e074328cc7"></a>SWEEP&#160;</td><td class="fielddoc">
<p>Constant sweep with step <a class="el" href="servo_8h.html#a3a036039969fe1374ce619c5be838d61" title="Define sweep step in degrees This marco defines a sweep step. Every step servo will rotate by this va...">SERVO_STEP_DEG</a> </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="adb4fe5913bad3ac2c2c8a43382a19f8ca506e8dd29460ea318b68d035f679b01b"></a>MANUAL&#160;</td><td class="fielddoc">
<p>Manual operation. You can set servo position by <a class="el" href="servo_8h.html#a0efffe5db4190a16376b48ab8ae0ac2c" title="Move servo to a given position in degrees This function allows movment of servo in a direction specif...">ServoMoveByDegree</a> </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a2d433bbccac873673ce5c7f76308e36a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="servo_8h.html#a2d433bbccac873673ce5c7f76308e36a">ServoState_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define Servo states. </p>
<dl class="section warning"><dt>Warning</dt><dd>Due to lack of feedback, this states are only predictions! Real state may be different! </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a2d433bbccac873673ce5c7f76308e36aa16ebdcb23eb5337fd5bc598fa8d6035d"></a>MOVING&#160;</td><td class="fielddoc">
<p>Servo is moving </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2d433bbccac873673ce5c7f76308e36aafd6a0e4343048b10646dd2976cc5ad18"></a>IDLE&#160;</td><td class="fielddoc">
<p>Servo reached its final position and is idle </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a2d433bbccac873673ce5c7f76308e36aa6b4af979c9694e48f340397ac08dfd1c"></a>LOCKED&#160;</td><td class="fielddoc">
<p>Servo is locked in <a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643ba6791b0cadbd0741a7a70eafee6ee192c">SCAN_AND_LOCK</a> sweep mode </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a9b2b8b593017fd9289c835aebc4e643b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643b">ServoSweep_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define Servo Sweep modes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a9b2b8b593017fd9289c835aebc4e643ba6c10fdfa1daee3c41144ae3c84215d1c"></a>SCAN_AND_GO&#160;</td><td class="fielddoc">
<p>In this mode Sonar will scan each direction and proceed with next one </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a9b2b8b593017fd9289c835aebc4e643ba6791b0cadbd0741a7a70eafee6ee192c"></a>SCAN_AND_LOCK&#160;</td><td class="fielddoc">
<p>In this mode Sonar will scan each direction and lock when It finds something under <a class="el" href="servo_8c.html#aeaa7cfdb4429db0c616191749d831110" title="Variable containing current Servo Lock range (cm) in SCAN_AND_LOCK mode. ">ServoLockRange</a> When lock is lost it will procced with next direction </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab944078572fad93e2090509e3957005b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Servo_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8c">ServoMode_t</a>&#160;</td>
          <td class="paramname"><em>InitialWorkMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643b">ServoSweep_t</a>&#160;</td>
          <td class="paramname"><em>InitialSweepMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Servo Initialize all necessary peripherals needed for servo control. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">InitialWorkMode</td><td>Define in which mode should servo operate </td></tr>
    <tr><td class="paramname">InitialSweepMode</td><td>Define Initial Sweep Mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This function must be called AFTER <a class="el" href="sonar_8h.html#a11b02ebbeab065aabcab82dd386024ea" title="Initialize Sonar and required peripherials. ">Sonar_init</a> ! </dd></dl>

</div>
</div>
<a class="anchor" id="addddfc1dc1dee155e313d00b0f660075"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServoChangeLockRange </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>NewRange</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows safe changing of servo <a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643ba6791b0cadbd0741a7a70eafee6ee192c">SCAN_AND_LOCK</a> mode lock range. </p>

</div>
</div>
<a class="anchor" id="a1c1e027654d29aef3848af9f2e118688"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServoChangeMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8c">ServoMode_t</a>&#160;</td>
          <td class="paramname"><em>NewMode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows safe changing of servo work mode. This function prevents some rare cases of deadlock due to timing issues that might arise when Servo is changing mode. </p>

</div>
</div>
<a class="anchor" id="a1865a21f6683bb41e8a935c33caa3363"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServoChangeSweepMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="servo_8h.html#a9b2b8b593017fd9289c835aebc4e643b">ServoSweep_t</a>&#160;</td>
          <td class="paramname"><em>NewSweep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function allows safe changing of servo SWEEP mode. </p>

</div>
</div>
<a class="anchor" id="a0efffe5db4190a16376b48ab8ae0ac2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServoMoveByDegree </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>degree</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move servo to a given position in degrees This function allows movment of servo in a direction specified by an angle. It will try to predict requied time needed by servo to finish rotation and set PIT_CH2 to countdown. It will also update <a class="el" href="servo_8c.html#aace1737de9594d03f5e07f8eb75a6c7a" title="Variable containing Servo current state. ">ServoState</a> appropriately. </p>
<dl class="section remark"><dt>Remarks</dt><dd>Avoid calling this function while servo is already moving. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">degree</td><td>Desired new position, calculated from servo's normal. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1285fbc29db2d21ff556d90bb80a557c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServoSweepStep </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>distance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute a sweep step depending on <a class="el" href="servo_8c.html#a1cc6cbb5101dee2b682f5e3b4ce39814" title="Variable containing current Servo Sweep mode. ">ServoSweepMode</a>. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a17abd21d85ada3e51b18432cf1c2b426"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="servo_8h.html#adb4fe5913bad3ac2c2c8a43382a19f8c">ServoMode_t</a> ServoMode</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define Servo Work mode Manual mode is default. </p>

</div>
</div>
<a class="anchor" id="a6ca30760f53d2a937b251cfb0e76a6e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t ServoPosition</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define Servo Position in degrees. This variable contains predicted position of a servo. </p>
<dl class="section warning"><dt>Warning</dt><dd>This is only the prediction and might have some error due to wrong value of <a class="el" href="servo_8h.html#a3d2e5b971afbd9bc1583edc510ce81a7" title="Define how many degrees this servo can turn This marco defines how far to the left and to the right c...">SERVO_MOVEMENT_RANGE</a> or due to nonlinearity of a servo. </dd></dl>

</div>
</div>
<a class="anchor" id="aace1737de9594d03f5e07f8eb75a6c7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="servo_8h.html#a2d433bbccac873673ce5c7f76308e36a">ServoState_t</a> ServoState</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variable containing Servo current state. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dfc317270c89deb8038687819d9c4f9f.html">sonar</a></li><li class="navelem"><a class="el" href="servo_8h.html">servo.h</a></li>
    <li class="footer">Generated on Tue Jan 27 2015 14:22:29 for Zumo - Sonar lib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
